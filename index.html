// Адрес криптокошелька для проверки
const walletAddress = '0xf3Ac5D4057F6AF98e9a820a99e8Df7C9A214438d';

// Список блокчейн-эксплореров для разных криптовалют
const explorers = {
  ethereum: {
    name: 'Ethereum',
    url: 'https://api.etherscan.io/api',
    apiKey: 'TMZHDP1BHKXXDQRHRV825XXRKCUQBGD8Q7',
    transactionsPath: '/api?module=account&action=txlist&address=',
    parameter: 'result',
    timestampField: 'timeStamp',
  },
  // Добавьте другие криптовалюты с их соответствующими блокчейн-эксплорерами
};

// Функция для выполнения HTTP GET запросов
function httpGet(url) {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4 && xhr.status === 200) {
        resolve(JSON.parse(xhr.responseText));
      } else if (xhr.readyState === 4) {
        reject(xhr.status);
      }
    };
    xhr.send();
  });
}

// Функция для определения прогретости криптокошелька
async function checkWalletActivity() {
  try {
    // Обход всех блокчейн-эксплореров
    for (const explorer of Object.values(explorers)) {
      const { name, url, apiKey, transactionsPath, parameter, timestampField } = explorer;

      // Формирование URL для получения списка транзакций кошелька
      const transactionsUrl = `${url}${transactionsPath}${walletAddress}&apikey=${apiKey}`;

      // Получение списка транзакций кошелька
      const transactionsResponse = await httpGet(transactionsUrl);
      const transactions = transactionsResponse[parameter];

      // Если у кошелька есть транзакции
      if (transactions && transactions.length > 0) {
        // Получение времени последней транзакции
        const lastTransactionTime = new Date(transactions[0][timestampField] * 1000);
        const currentTime = new Date();

        // Разница во времени в днях
        const daysSinceLastTransaction = Math.floor((currentTime - lastTransactionTime) / (1000 * 60 * 60 * 24));

        console.log(`${name}:`);
        console.log('Адрес кошелька:', walletAddress);
        console.log('Количество транзакций:', transactions.length);
        console.log('Прогретость кошелька (дней с последней транзакции):', daysSinceLastTransaction);
        console.log('---');
      } else {
        console.log(`${name}: Кошелек еще не использовался.`);
        console.log('---');
      }
    }
  } catch (error) {
    console.error('Ошибка при определении прогретости криптокошелька:', error);
  }
}

// Запуск проверки прогретости криптокошелька
checkWalletActivity();
