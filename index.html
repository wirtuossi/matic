<!DOCTYPE html>
<html>
<head>
    <title>Игра с MetaMask</title>
</head>
<body>
    <h1>Игра с MetaMask</h1>

    <!-- Подключение библиотеки Web3.js -->
    <script src="https://cdn.jsdelivr.net/npm/web3@1.3.0/dist/web3.min.js"></script>

    <input type="number" id="amountInput" step="0.0001" placeholder="Сумма для отправки (в ETH)">
    <button onclick="executeTransaction()">Отправить</button>

    <script>
        // Подключение MetaMask
        async function connectMetaMask() {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    // Запрос на подключение к MetaMask
                    await window.ethereum.request({ method: 'eth_requestAccounts' });
                    console.log('MetaMask подключен!');

                    // Установка провайдера Web3.js
                    window.web3 = new Web3(window.ethereum);
                } catch (error) {
                    console.error('Ошибка подключения к MetaMask:', error);
                }
            } else {
                console.error('MetaMask не найден.');
            }
        }

        // Выполнение транзакции
        async function executeTransaction() {
            const amountInput = document.getElementById('amountInput');
            const amountEth = amountInput.value;

            try {
                // Получение аккаунта MetaMask
                const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                const account = accounts[0];

                // Преобразование суммы из ETH в wei
                const weiAmount = web3.utils.toWei(amountEth, 'ether');

                // Создание транзакции
                const transaction = {
                    from: account,
                    to: '0xваш_адрес_получателя', // Замените на фактический адрес получателя
                    value: weiAmount,
                };

                // Отправка транзакции
                const result = await window.ethereum.request({ method: 'eth_sendTransaction', params: [transaction] });
                console.log('Транзакция отправлена:', result);
            } catch (error) {
                console.error('Ошибка при выполнении транзакции:', error);
            }
        }

        // Вызов функции подключения MetaMask
        connectMetaMask();
    </script>
</body>
</html>
